(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9394888"],{"0e8f":function(e,t,a){"use strict";a("20f6");var s=a("e8f2");t["a"]=Object(s["a"])("flex")},"1c0d":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"closure"},[a("v-card",{style:e.viewRule_Box,attrs:{outlined:"","min-width":"100"},on:{click:function(t){return e.showDialog(e.view._id)}}},[a("v-container",{staticClass:"px-1 py-0"},[a("v-layout",[a("v-flex",{staticClass:"box",style:e.hover},[a("div",{staticClass:"boxtitle text-center "},[a("v-card-subtitle",{staticClass:"pa-0"},[a("span",{staticClass:"overline"},[e._v(e._s(e.view.name))])])],1),a("div",{staticClass:"boxvalue text-center mt-n2 caption"},[a("span",{style:e.viewRule_Value},[e._v(e._s(e.view.value))])])])],1)],1)],1)],1)},i=[],n=a("0c12"),o={props:["view","cursor"],data:function(){return{}},methods:{showDialog:function(e){n["a"].$emit("details",e)}},computed:{hover:function(){return{"--cursor":this.cursor}}}},r=o,l=(a("89258"),a("2877")),c=a("6544"),u=a.n(c),d=a("b0af"),v=a("99d9"),h=a("a523"),p=a("0e8f"),b=a("a722"),m=Object(l["a"])(r,s,i,!1,null,"52401035",null);t["a"]=m.exports;u()(m,{VCard:d["a"],VCardSubtitle:v["b"],VContainer:h["a"],VFlex:p["a"],VLayout:b["a"]})},"37ac":function(e,t,a){"use strict";a("7ca2")},"75d2":function(e,t,a){},"7ca2":function(e,t,a){},"86c9":function(e,t,a){"use strict";a("75d2")},89258:function(e,t,a){"use strict";a("e2a0")},c2fb:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"closures"},[a("v-container",[a("v-row",{attrs:{"justify-center":"",dense:""}},[a("v-col",{attrs:{cols:"12",lg:"12",sm:"12"}},[a("div",{staticClass:"d-flex justify-center flex-wrap"},e._l(e.$displayOrder(e.$view.closure),(function(e,t){return a("Closure",{key:t,staticClass:"ma-1",attrs:{view:e,cursor:"pointer"}})})),1)])],1)],1),e.dialog?a("ReadingsDetails",{attrs:{id:e.activeID},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}}):e._e()],1)},i=[],n=a("1c0d"),o=a("e5ad"),r=a("0c12"),l={name:"ClosureVIew",components:{Closure:n["a"],ReadingsDetails:o["a"]},data:function(){return{dialog:!1,activeID:""}},created:function(){r["a"].$on("details",this.openDetailsDialog)},mounted:function(){window.scrollTo(0,0)},methods:{openDetailsDialog:function(e){this.activeID=e,this.dialog=!this.dialog}}},c=l,u=(a("37ac"),a("2877")),d=a("6544"),v=a.n(d),h=a("62ad"),p=a("a523"),b=a("0fd9"),m=Object(u["a"])(c,s,i,!1,null,"18d338c8",null);t["default"]=m.exports;v()(m,{VCol:h["a"],VContainer:p["a"],VRow:b["a"]})},e2a0:function(e,t,a){},e5ad:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-dialog",{attrs:{"max-width":"700px",scrollable:"",fullscreen:e.$vuetify.breakpoint.mobile},on:{"click:outside":function(t){e.revealTag=!1}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",{attrs:{elevation:"24",outlined:""}},[a("v-card-title",{staticClass:"headline px-3"},[e._v(e._s(e.id)),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.show=!1}}},[a("v-icon",[e._v(e._s(e.$icon.mdiClose))])],1)],1),a("v-subheader",{staticClass:"font-italic mt-n6"},[e._v(e._s(e.registerType()))]),a("v-card-text",{staticClass:"pa-0"},[a("pre",{class:["",{"fs-13":e.$vuetify.breakpoint.mobile}]},[e._v(e._s(e.$root.readingsTest[e.id]))])]),a("v-divider"),a("v-card-actions",{staticClass:"py-4"},[a("v-btn",{staticClass:"ml-2 mr-3",attrs:{color:"primary"},on:{click:function(t){e.eventDialog=!0}}},[a("v-icon",{attrs:{left:""}},[e._v(e._s(e.$icon.mdiAccessPointPlus))]),e._v("Event")],1),a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":"",top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary"}},"v-btn",i,!1),s),[a("v-icon",{attrs:{left:""}},[e._v(e._s(e.$icon.mdiPencil))]),e._v("Edit")],1)]}}])},[a("v-list",e._l(e.editMenu,(function(t,s){return a("v-list-item",{key:s},[a("v-btn",{attrs:{disabled:t.disabled},on:{click:function(a){return e.edit(t.title)}}},[e._v(e._s(t.title))])],1)})),1)],1)],1),a("v-spacer")],1),a("v-expand-transition",[e.revealTag?a("v-card",{staticClass:"transition-fast-in-fast-out v-card--reveal d-flex flex-column",staticStyle:{height:"100%"},attrs:{outlined:""}},[a("v-card-title",{staticClass:"headline px-3"},[a("v-icon",{staticClass:"pr-3"},[e._v(e._s(e.$icon.mdiCodeBrackets))]),e._v(e._s(e.id)+" - Edit Tags "),a("v-spacer")],1),a("v-subheader",{staticClass:"font-italic mt-n7"},[e._v("array")]),a("v-card-text",{staticClass:"pb-0",attrs:{scrollable:""}},[a("v-combobox",{attrs:{outlined:"","small-chips":"",multiple:"",label:"Event Tags",items:e.tagAll},model:{value:e.tagArray,callback:function(t){e.tagArray=t},expression:"tagArray"}})],1),a("v-spacer"),a("v-divider"),a("v-card-actions",{},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.revealTag=!1}}},[e._v(" cancel ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.revealTag=!1&e.addTags()}}},[e._v(" OK ")])],1)],1):e._e()],1),a("v-expand-transition",[e.revealViewRule?a("v-card",{staticClass:"transition-fast-in-fast-out v-card--reveal d-flex flex-column",staticStyle:{height:"100%"},attrs:{outlined:""}},[a("v-card-title",{staticClass:"headline px-3"},[a("v-icon",{staticClass:"pr-3"},[e._v(e._s(e.$icon.mdiCodeJson))]),e._v(e._s(e.id)+" - View Rules "),a("v-spacer")],1),a("v-subheader",{staticClass:"font-italic mt-n7"},[e._v("object")]),a("v-card-text",{staticClass:"pb-0",staticStyle:{overflow:"auto"},attrs:{scrollable:""}},[a("v-jsoneditor",{staticClass:"mb-2 ",attrs:{options:e.options,plus:!1,height:"60vh"},model:{value:e.viewRuleObject,callback:function(t){e.viewRuleObject=t},expression:"viewRuleObject"}}),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mr-2",attrs:{color:"primary"},on:{click:function(t){return e.addRule("value")}}},[e._v("+ Value Rule")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.addRule("box")}}},[e._v("+ Box Rule")])],1),a("v-card-text",{staticClass:"d-flex justify-center"},[a("span",[e._v('This allows you to modify the view based on a "value". These rules are global. It will apply to everyones view. If making changes from the desktop, make sure the changes are acceptable for mobile and vice versa. A basic knowlage of JSON and CSS is required.')])])],1),a("v-spacer"),a("v-divider"),a("v-card-actions",{},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.revealViewRule=!1}}},[e._v(" cancel ")]),a("v-btn",{attrs:{disabled:e.ok,color:"primary",text:""},on:{click:function(t){e.revealViewRule=!1&e.updateViewRule()}}},[e._v(" OK ")])],1)],1):e._e()],1)],1)],1),e.eventDialog?a("EventsEditDialog",{attrs:{mode:e.eventMode,events:e.emptyEventWithID},model:{value:e.eventDialog,callback:function(t){e.eventDialog=t},expression:"eventDialog"}}):e._e()],1)},i=[],n=(a("4160"),a("caad"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("466d"),a("159b"),a("53ca")),o=a("3966"),r=function(){return a.e("chunk-3e201052").then(a.bind(null,"27f7"))},l={name:"readingsDetailsDialog",components:{EventsEditDialog:o["a"],VJsoneditor:r},props:["value","id"],data:function(e){return{options:{search:!1,mode:"code",mainMenuBar:!1,onValidationError:function(t){console.log(t),e.jsonEditorErrors=t,e.jsonEditorErrors.length>0?e.ok=!0:e.ok=!1},schema:e.valueRule,onValidate:function(e){var t=["readingsValue","comparison","value","css"],a=[];return e.value?Array.isArray(e.value)?e.value.forEach((function(e){"object"!==Object(n["a"])(e)&&a.push({path:["value"],message:"Value array must contain objects."});var s=0;Object.keys(e).forEach((function(i){s++,t.includes(i)?("readingsValue"===i&&(e[i].match(/^(value|mathValue|rawValue)$/)||a.push({path:["value"],message:"Required - readingsValue: value|mathValue|rawValue"})),"comparison"===i&&(e[i].match(/^(equal|notEqual|lessThan|lessThanOrEqual|graterThan|graterThanOrEqual|between|notBetween)$/)||a.push({path:["value"],message:"Required - comparison: equal|notEqual|lessThan|lessThanOrEqual|graterThan|graterThanOrEqual|between|notBetween"})),"css"===i&&"object"!==Object(n["a"])(e[i])&&a.push({path:["value"],message:"css must be an object"})):a.push({path:["value"],message:"Value object must contain readingsValue, comparison, value, and css key properties"})})),s<4&&a.push({path:["value"],message:"value object must contain readingsValue, comparison, value, and css key properties"})})):a.push({path:["value"],message:"Value must be an array."}):a.push({path:["value"],message:'Required property "value" missing.'}),e.box?Array.isArray(e.box)?e.box.forEach((function(e){"object"!==Object(n["a"])(e)&&a.push({path:["box"],message:"box array must contain objects."});var s=0;Object.keys(e).forEach((function(i){s++,t.includes(i)?("readingsValue"===i&&(e[i].match(/^(value|mathValue|rawValue)$/)||a.push({path:["box"],message:"Required - readingsValue: value|mathValue|rawValue"})),"comparison"===i&&(e[i].match(/^(equal|notEqual|lessThan|lessThanOrEqual|graterThan|graterThanOrEqual|between|notBetween)$/)||a.push({path:["box"],message:"Required - comparison: equal|notEqual|lessThan|lessThanOrEqual|graterThan|graterThanOrEqual|between|notBetween"})),"css"===i&&"object"!==Object(n["a"])(e[i])&&a.push({path:["box"],message:"css must be an object"})):a.push({path:["box"],message:"Box object must contain readingsValue, comparison, value, and css key properties"})})),s<4&&a.push({path:["box"],message:"box object must contain readingsValue, comparison, value, and css key properties"})})):a.push({path:["box"],message:"Box must be an array."}):a.push({path:["box"],message:'Required property "box" missing.'}),a}},eventMode:"create",eventDialog:!1,test:!1,revealTag:!1,revealViewRule:!1,tagAll:[],tagArray:[],rules:{name:[function(e){return(e||"").length>0||"No empty fields"}]},status:{},editMenu:[{title:"Reset Min",disabled:!0},{title:"Reset Max",disabled:!0},{title:"Edit Tag",disabled:!1},{title:"View Rule",disabled:!1}],viewRuleObject:{},jsonEditorErrors:[],ok:!0}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){this.tagNames(),this.emptyEventWithID=this.$clone(this.$emptyEvent),this.emptyEventWithID.register_id=this.id,this.emptyEventWithID.alias=this.$root.readingsTest[this.id].view.alias},methods:{addRule:function(e){var t={readingsValue:"",comparison:"",value:"",css:{}};"value"===e?this.viewRuleObject.value.push(t):"box"===e&&this.viewRuleObject.box.push(t)},registerType:function(){var e=this.id.includes("_");return e?(this.editMenu[0].disabled=!0,this.editMenu[1].disabled=!0,"binary"):(this.editMenu[0].disabled=!1,this.editMenu[1].disabled=!1,this.editMenu[2].disabled=!1,"word")},testing:function(e){console.log(e)},updateViewRule:function(){var e={};e._id=this.id,e.rule=this.viewRuleObject,this.$http.post("/api/modbus/updateViewRule",e).then((function(e){console.log(e)}))},onError:function(e){console.log(e)},edit:function(e){var t=this;switch(e){case"Reset Min":this.$http.get("/api/modbus/resetMin/".concat(this.id)).then((function(e){console.log(e)}));break;case"Reset Max":this.$http.get("/api/modbus/resetMax/".concat(this.id)).then((function(e){console.log(e)}));break;case"Edit Tag":this.revealTag=!this.revealTag,this.$http.get("/api/modbus/getTagByID/".concat(this.id)).then((function(e){t.tagArray=e.results}));break;case"View Rule":this.viewRuleObject=this.$root.readingsTest[this.id].view.rule,this.revealViewRule=!this.revealViewRule;break;default:break}},addTagItem:function(){this.tagArray.push("")},addTags:function(){var e=this,t={_id:this.id,tag:this.tagArray};this.$http.post("/api/modbus/updateTags",t).then((function(t){e.status=t,e.tagNames()}))},removeTag:function(e){this.$delete(this.tagArray,e)},tagNames:function(){var e=this;this.$http.get("/api/readings/tagNames").then((function(t){t.results.forEach((function(t){e.tagAll.includes(t)||e.tagAll.push(t)})),e.tagAll.sort()}))}}},c=l,u=(a("86c9"),a("2877")),d=a("6544"),v=a.n(d),h=a("8336"),p=a("b0af"),b=a("99d9"),m=a("2b5d"),f=a("169a"),g=a("ce7e"),w=a("0789"),x=a("132d"),y=a("8860"),V=a("da13"),_=a("e449"),C=a("2fa4"),k=a("e0c7"),E=Object(u["a"])(c,s,i,!1,null,"1ff13d41",null);t["a"]=E.exports;v()(E,{VBtn:h["a"],VCard:p["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCombobox:m["a"],VDialog:f["a"],VDivider:g["a"],VExpandTransition:w["a"],VIcon:x["a"],VList:y["a"],VListItem:V["a"],VMenu:_["a"],VSpacer:C["a"],VSubheader:k["a"]})}}]);
//# sourceMappingURL=chunk-c9394888.c8b086b8.js.map